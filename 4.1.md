# Домашнее задание к занятию «4.1. Финансовые системы»

В качестве результата пришлите ответы на вопросы в личном кабинете студента на сайте [netology.ru](https://netology.ru/).

В каждом задании сформулирован один (или несколько вопросов), и вам нужно найти ответы в соответствующем нормативно-правовом акте (далее – НПА).

Обратите внимание:

- там, где требуется указать понятие, необходимо привести это понятие целиком
- там, где необходимо описать иное (например, ответить на вопрос "в течение какого времени", "какая ответственность" и т.д.) достаточно ответа собственными словами (как вы поняли) и указания номера статьи и пункта.

Обратите внимание, что справочная система КонсультантПлюс в бесплатной редакции не даёт копировать текст документа.

Важно: правовые системы предлагают платную подписку на комментарии, аналитические материалы и подборки ссылок. В рамках нашего курса платная подписка не требуется. Все ДЗ рассчитаны на работу исключительно с бесплатной версией. Поэтому, пожалуйста, нигде не вводите данные своих карт и т.д.

## Задача №1 - ГОСТ Р 57580

Вам необходимо изучить ГОСТ Р 57580. Документ состоит из двух частей:

1. ГОСТ Р 57580.1-2017
2. ГОСТ Р 57580.2-2018

Ответьте на следующие вопросы:

1. Что такое контур безопасности?

   ***

   **Ответ:** 

   **контур безопасности:** Совокупность объектов информатизации, определяемая областью применения настоящего стандарта, используемых для реализации бизнес-процессов и (или) технологических процессов финансовой организации единой степени критичности (важности), для которой финансовой организацией применяется единая политика (режим) защиты информации (единый набор требований к обеспечению защиты информации).

   ***

2. Что/кто является субъектом доступа (в рамках данного стандарта)? Какие основные типы их рассматриваются?

   ***

   **Ответ:**

   **субъект доступа:** Работник финансовой организации или иное лицо, осуществляющий физический и (или) логический доступ, или программный сервис, осуществляющий логический доступ.

   Рассматриваются следующие основные типы:

   - Пользователи;
   - Эксплуатационный персонал;
   - Технический (вспомогательный) персонал;
   - Программные сервисы.

   ***

3. Что такое компрометация аутентификационных данных?

   ***

   **Ответ:**

   **компрометация аутентификационных данных:** Событие, связанное с возникновением возможности использования аутентификационных данных субъектом, не являющимся легальным владельцем указанных аутентификационных данных.

   ***

4. Что такое фактор аутентификации? На какие категории подразделяются факторы?

   ***

   **Ответ:**

   **фактор аутентификации:** Блок данных, используемых при аутентификации субъекта или объекта доступа.

   Факторы аутентификации подразделяются на следующие три категории:

   - что-то, что субъект или объект доступа знает, например, пароли легальных субъектов доступа, ПИН-коды;

   - что-то, чем субъект или объект доступа обладает, например, данные, хранимые на персональных технических устройствах аутентификации: токенах, смарт-картах и иных носителях;

   - что-то, что свойственно субъекту или объекту доступа, например, биометрические данные физического лица - легального субъекта доступа.

   ***

5. Что такое однофакторная и многофакторная аутентификация?

   ***

   **Ответ:**

   - **однофакторная аутентификация:** Аутентификация, для осуществления которой используется один фактор аутентификации.

   - **многофакторная аутентификация:** Аутентификация, для осуществления которой используются два и более различных факторов аутентификации.

   ***

6. Чем событие ЗИ отличается от инцидента ЗИ?

   ***

   **Ответ:**

   - **Событие ЗИ** - это любое создание или изменение состояний объектов информатизации. В некоторых случаях может являться инциденом.

   - **Инцидент ЗИ** - это событие ЗИ, которое является нежелательным и может негативно повлиять на бизнес-процессы или наружить режим ИБ.

   ***

7. Что такое компенсирующие меры? В каких случаях они применяются?

   ***

   **Ответ:**

   - **Компенсирующие меры** - это обработка операционного риска связанного с реализацией тех же угроз безопасности информации, на нейтрализацию которых направлены меры из базового состава мер защиты информации настоящего стандарта, не применяемые финансовой организацией в связи с невозможностью технической реализации и (или) экономической целесообразностью. 
   - Применяются при невозможности технической реализации отдельных выбранных мер защиты информации, а также с учетом экономической целесообразности на этапах адаптации (уточнения) базового состава мер 

   ***

8. Сколько уровней ЗИ определяет стандарт? Перечислите их.

   ***

   **Ответ:**

   Настоящий стандарт определяет три уровня защиты информации:

   - уровень 3 - минимальный;

   - уровень 2 - стандартный;

   - уровень 1 - усиленный.

   ***

9. Какой из всех возможных объектов атак нарушитель выберет с наибольшей вероятностью (с точки зрения авторов стандарта)?

   ***

   **Ответ:**

   Доступы.

   ***

10. Для оценки полноты реализации процессов системы ЗИ используют качественную модель оценивания. Приведите уровни соответствия с их описанием, указанные в данной модели?

    ***

    **Ответ:**

    - **нулевой уровень соответствия:** организационные и технические меры процесса системы ЗИ не реализуются или реализуются в единичных случаях. Общие подходы (способы) реализации организационных и технических мер процесса системы ЗИ не установлены. Контроль и совершенствование реализации организационных и технических мер процесса системы ЗИ не осуществляются;

    - **первый уровень соответствия:** организационные и технические меры процесса системы ЗИ реализуются в незначительном количестве, бессистемно и/или эпизодически. Общие подходы (способы) реализации организационных и технических мер процесса системы ЗИ не установлены. Контроль и совершенствование реализации организационных и технических мер процесса системы ЗИ не осуществляются;

    - **второй уровень соответствия:** организационные и технические меры процесса системы ЗИ реализуются в значительном количестве на постоянной основе. Общие подходы (способы) реализации организационных и технических мер процесса системы ЗИ установлены в единичных случаях. Реализация организационных и технических мер процесса системы ЗИ осуществляется на усмотрение исполнителя. Контроль и совершенствование реализации организационных и технических мер процесса системы ЗИ практически не осуществляются;

    - **третий уровень соответствия:** организационные и технические меры процесса системы ЗИ реализуются в значительном количестве на постоянной основе в соответствии с общими подходами (способами), установленными в финансовой организации. Контроль и совершенствование реализации организационных и технических мер процесса системы ЗИ осуществляются бессистемно и/или эпизодически;

    - **четвертый уровень соответствия:** организационные и технические меры процесса системы ЗИ реализуются в полном объеме на постоянной основе в соответствии с общими подходами (способами), установленными в финансовой организации. В финансовой организации в основном реализованы контроль и совершенствование реализации организационных и технических мер процесса системы ЗИ;

    - **пятый уровень соответствия:** организационные и технические меры процесса системы ЗИ реализуются в полном объеме на постоянной основе в соответствии с общими подходами (способами), установленными в финансовой организации. В финансовой организации реализованы постоянный контроль и необходимое своевременное совершенствование реализации организационных и технических мер процесса системы ЗИ.

    ***

11. Что рекомендуется использовать в качестве основных источников свидетельств для оценки соответствия ЗИ?

    ***

    **Ответ:**

    - документы проверяемой организации и иные материалы проверяемой организации в бумажном или электронном виде и, при необходимости, документы третьих лиц, относящиеся к обеспечению ЗИ финансовой организации и находящиеся в распоряжении проверяемой организации;

    - устные высказывания сотрудников проверяемой организации в процессе проводимых опросов в области оценки соответствия ЗИ;

    - результаты наблюдений членов проверяющей группы за процессами системы ЗИ и деятельностью сотрудников проверяемой организации в области оценки соответствия ЗИ;

    - параметры конфигураций и настроек технических объектов информатизации и средств ЗИ;

    - технические и программные средства сбора свидетельств полноты реализации мер ЗИ (анализ электронных журналов регистрации, анализ фактических настроек, анализ уязвимостей, проведение тестирования на проникновение и т.п.).

    ***

## Задача №2 - Тинькофф Мобильный SDK

Банк Тинькофф предлагает [Мобильный SDK](https://oplata.tinkoff.ru/develop/sdk/) для встраивания в мобильные приложения возможностей оплаты с карт.

[![img](https://github.com/netology-code/ibb-homeworks/raw/v2/09_financial/pic/sdk.png)](https://github.com/netology-code/ibb-homeworks/blob/v2/09_financial/pic/sdk.png)

SDK (Software Development Kit) - набор инструментов для упрощения разработки. В частности, в случае Tinkoff - это набор уже реализованных программных блоков, которые программисты могут использовать для ускорения процесса интеграции платежей в собственное мобильное приложение.

По традиции, мы на всякий случай локально сохранили копии документов для [Android](https://github.com/netology-code/ibb-homeworks/blob/v2/09_financial/assets/android.pdf) и [iOS](https://github.com/netology-code/ibb-homeworks/blob/v2/09_financial/assets/ios.pdf).

### Справка

OpenSSL позволяет [вычислять хэши по разным алгоритмам](https://www.openssl.org/docs/manmaster/man1/dgst.html), например, для md5:

```
openssl dgst -md5 file.txt
```

Где `file.txt` - это файл, внутри которого хранятся данные, для которых нужно рассчитать хэш.

Конечно же, это не всегда удобно (плюс некоторые редакторы добавляют в файл перенос строки и у вас получается неверный хеш).

Современные командные оболочки предлагают нам синтаксис, позволяющий направить на вход одному приложению (аналог ввода "руками") данные из вывода другого приложения. Это так называемый pipe (труба).

Выглядит это следующим образом:

```
echo -n 'Netology' | openssl dgst -md5
(stdin)= f9b9c75ad5aa4b6acd7cf3d1a282d5b1
```

Где команда `echo` выводит строку `Netology`, опция `-n` не добавляет перенос строки, а символ `|` "перенаправляет" этот вывод на вход команды `openssl`. Таким образом, нам не обязательно вводить хэш руками или сохранять в файл.

Кроме того, в рамках решения задачи вам понадобится использовать [кодировку base64](https://tools.ietf.org/html/rfc4648).

Base64 - это кодировка, используемая для кодирования данных при передаче в ситуациях, когда окружение допускает только передачу в виде символов, соответствующих [ASCII](https://tools.ietf.org/html/rfc20).

Для этого есть соответствующие флаги [в команде enc](https://www.openssl.org/docs/manmaster/man1/openssl-enc.html):

- закодировать файл в base64: `openssl enc -base64 -in msg.txt -out msg.base64`
- декодировать из base64: `openssl enc -d -base64 -in msg.base64 -out msg.txt`

### Задача

#### Токен сообщения

В рамках документации описано формирование подписи сообщения (в терминологии документа - `Token`), которая позволяет верифицировать, что сообщение действительно от вас. Вам нужно найти описание этого алгоритма и подписать следующий документ:

```
{
  "TerminalKey": "TerminalKey",
  "Amount": "100000",
  "OrderId": "10001",
  "Description": "Подарочная карта на 1000 рублей"
}
```

В качестве пароля (password) используйте строку `TopSecret`.

<details style="box-sizing: border-box; display: block; margin-top: 0px; margin-bottom: 16px;"><summary style="box-sizing: border-box; display: list-item; cursor: pointer;">Подсказка</summary></details>

В качестве результата пришлите Token для указанного документа.

***

**Ответ:**

Решил задачу простым методом через терминал и масштабируемым в Python

1) Простой метод:

   ```bash
   $ echo -n '100000Подарочная карта на 1000 рублей10001TopSecretTerminalKey' | openssl dgst -sha256
   7e9189aa15689d518e89135ab7c71e1227db5d59b2200d5a5eee08c4a9b2be15
   ```

2) Python и библиотека hashlib

   ```python
   import hashlib
   cell = "1"
   val = "1"
   mess = {}
   
   # Заполняем словарь значениями
   while(cell!="0"):
       print("Введите имя переменной или введите 0 для завершения ввода")
       cell = input()
       if (cell != "0"):
           print("введите значение")
           val = input()
           mess[cell] = val
   print(mess)
   
   # Сортируем по ключам и выдергиваем значения в переменную dmes
   mess_sort = sorted(mess.keys())
   dmes=""
   for i in mess_sort:
       dmes=dmes+mess[i]
   print(dmes)
   
   # Вычисляем хэш полученной строки и выводим ее
   enc = hashlib.sha256(dmes.encode('utf-8'))
   print(enc.hexdigest())
   ```

   Работа программы:

   ```bash
   project/main.py"
   Введите имя переменной или введите 0 для завершения ввода
   TerminalKey
   введите значение
   TerminalKey
   Введите имя переменной или введите 0 для завершения ввода
   Amount
   введите значение
   100000
   Введите имя переменной или введите 0 для завершения ввода
   OrderId
   введите значение
   10001
   Введите имя переменной или введите 0 для завершения ввода
   Description
   введите значение
   Подарочная карта на 1000 рублей
   Введите имя переменной или введите 0 для завершения ввода
   Password
   введите значение
   TopSecret
   Введите имя переменной или введите 0 для завершения ввода
   0
   {'TerminalKey': 'TerminalKey', 'Amount': '100000', 'OrderId': '10001', 'Description': 'Подарочная карта на 1000 рублей', 'Password': 'TopSecret'}
   100000Подарочная карта на 1000 рублей10001TopSecretTerminalKey
   7e9189aa15689d518e89135ab7c71e1227db5d59b2200d5a5eee08c4a9b2be15
   ```

   https://github.com/about)